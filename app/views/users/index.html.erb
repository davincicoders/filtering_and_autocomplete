<script>
  var state_names = [<%= @states.join(',').html_safe %>];
</script>
<div class="page-header">
  <%= link_to new_user_path, class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    New User
  <% end %>
  <h1>Listing users</h1>
</div>

<%= will_paginate @users %>

<div class='row filter'>
  <div class='col-md-4'>
    <%= form_tag filter_path, :method => 'get' do %>
      <p>
        <%= label_tag :state_name_filter, 'Filter by State:' %>
        <%= text_field_tag :state_name_filter, params[:state_name_filter] %>
        <%= submit_tag "Search" %>
      </p>
    <% end %>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
      <th><%= sortable('first_name') %></th>
      <th><%= sortable('last_name') %></th>
      <th><%= sortable('address_line', 'Address') %></th>
      <th><%= sortable('city') %></th>
      <th><%= sortable('state') %></th>
      <th><%= sortable('zip') %></th>
      <th>Avatar</th>
      <th colspan='3'></th>
    </tr>
    </thead>

    <tbody>
    <%= content_tag_for(:tr, @users) do |user| %>
      <td><%= user.first_name %></td>
      <td><%= user.last_name %></td>
      <td><%= user.address_line %></td>
      <td><%= user.city %></td>
      <td><%= user.state %></td>
      <td><%= user.zip %></td>
      <td><%= image_tag(user.avatar) %></td>
      <td><%= link_to 'Show', user %></td>
      <td><%= link_to 'Edit', edit_user_path(user) %></td>
      <td><%= link_to 'Destroy', user, method: :delete, data: {confirm: 'Are you sure?'} %></td>
    <% end %>
    </tbody>
  </table>
</div>

<%= will_paginate @users %>
